---
date: 2025-04-27 23:40:00+09:00
layout: post
title: インターネット砂時計とベンダーロックイン
description: 垂直統合と水平統合に関する目から鱗だった話
image: '/images/iStock-1339449460.jpg'
tags:
- コンピュータ＆ネットワーク
keywords:
- 砂時計モデル
- ベンダーロックイン
- 垂直統合
- 水平統合
language:
- 日本語
---

1998年、Steve Deering が「インターネットは『砂時計(Hourglass)』のようである」と言ったのは有名な話です。

![]({{site.baseurl}}/images/Deering98a.png)
*https://ant.isi.edu/csci551/images/3/32/Deering98a.pdf より引用*

インターネット・プロトコルスタックの上位の部分はさまざまなプロトコルやアプリケーション(e.g.,TCP、UDP、SCTP、HTTP、SMTP、DNS、など)が利用されています。また、下位の部分も色々なインターフェースや物理メディア(e.g., Ethernet、Wi-Fi、Fiber、Copper、Radio、など)が利用できます。しかしその間の位置するものは、IP(v4)に収斂されています（近年はIPv6も一般的になってきたので、この図とは少し違った姿になっていますが、少なくとも1998年当時はこう考えられてました）。このような構造をSteve Deeringは「砂時計」と表現したわけです。このような構造は「細い腰(Narrow Waist)」と言われることもあります。

このような構造によって、上位のレイヤーも下位のレイヤーも独立して進化することができ、イノベーションを加速する（と同時に、この構造が失われつつあることを危惧している）、というのがSteve Deeringの主張でした。

このインターネット砂時計の話は、私が愛読しているLarry PetersonとBruce Davieによる[News Letter](https://systemsapproach.org/newsletter/)にも度々登場します。先日彼らの記事を読んでいて、ふと思い出したエピソードを紹介したいと思います。

私がNiciraに勤めていた2011年頃の話です。その年グローバルのSales/SEミーティングがあり、Palo Altoにある本社ビルにSales/SEが集まっていました。当時はまだ15名ほどだったと思います。2日間ほど色々議論をしたのですが、その中で1時間ほどNiciraのFounderの一人であるMartin Casadoが来て話してくれる時間が設けられていました。一通りMartinが話終わってQ&Aの時間に入った時に、ある人が「我々はネットワークの世界におけるベンダーロックインからユーザを解放する、という目標を掲げているが、顧客がNVP(Niciraが開発していた仮想ネットワークのスタック)を採用してくれたら、結局顧客はNVPにロックインされてしまうのでは？」という質問をしました。「よくぞ聞いてくれた！」と思いました。この点は私自身もずーっと感じていたジレンマだったからです。

この質問に対してMartinは即座に返答しました。「垂直統合と水平統合は違うものだ」と。彼の説明はこういうものでした。

> 例えば、PCで使っているオペレーティングシステム、ほぼほぼ皆Windowsを使っているはずだ（注 - 当時は今ほどMacOSは一般的ではなかった）。つまり、皆、Windowsにロックインされていることになる。しかしそれを不便であるとか、不利益を被っていると考えているだろうか？　おそらくNOだ。なぜなら、Windowsが動くハードウェアを自由に選ぶことができ、Windowsの上で動くアプリケーションも自由に選択することができるからだ。つまりこれは水平に統合されていることになる。仮に、Windowsが特定のハードウェア（おそらくMicrosoft製）でしか動かず、アプリケーションもMicrosoft製のものしか動かないとしたらどうだろう？　おそらく今日のようなPCの発展はなかったし、皆不満を感じるだろう。これがいわゆる垂直統合である。

> NVPはネットワークにおけるWindowsのような存在だ。任意の物理ネットワークの上で動作し、APIを使ってその上でさまざまなネットワークアプリケーションが動作する。NVPはネットワークに水平統合をもたらし、今日の垂直統合されたベンダーロックイン状況からユーザを解放する。

この明快なMartinの説明に感動したのをよく覚えています。しかも、熟考したわけではなく即座にこのような説得力のある説明が出てきたので、強烈なインパクトがありました。

今、考えてみると、この話は冒頭のインターネット砂時計モデルと共通点があるな、と思うわけです。仮想ネットワークによってミドルレーヤーを集約し、上の部分（ネットワークアプリケーションやCloud Management System）と下の部分（ハードウェア）を自由に選べるようにすることによってネットワークを民主化し、イノベーションを加速していく。NVPが目指していたものはインタネットプロトコルにおけるIPに相当する部分、すなわちNarrow Waistだったのだな、と。

また、VMware vSphereがサーバの世界で広く受け入れらたのは、幅広いハードウェアをサポートし、その上で任意の仮想マシンを動かすことができたので、Narrow Waistの役割をうまく果たすことができたから、と考えることもできると思います。

残念ながらNVP及びその後継であるNSXは、このNarrow Waistにはなり切れていないのが現状です。垂直統合を切り崩していくのは困難な道のりですが、これからもネットワーク仮想化によるネットワークの民主化を進める努力を続けていきたいと思います。
